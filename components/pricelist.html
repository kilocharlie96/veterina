<div id="pricelist-vue">
  <h2>Orientačný cenník</h2>
  <p><small>Cena pre konkrétneho pacienta je upresnená po vyšetrení.</small></p>

  <section class="pricelist-section" v-for="(groups, sectionName) in pricelist" :key="sectionName">
    <h3 :id="sectionName
        .normalize('NFD')
        .replace(/[\u0300-\u036f]/g, '')
        .toLowerCase()
        .replace(/\s+/g, '-')">
        {{ sectionName }}
    </h3>

    <div v-for="(items, groupName) in groups" :key="groupName">
      <h4 v-if="groupName">{{ groupName }}</h4>

      <ul>
        <li class="pricelist-row" v-for="row in items" :key="row.id">
          {{ row.item }} <small class="price">{{ row.price }}</small>
        </li>
      </ul>
    </div>
  </section>
</div>

<script>
  const { createApp, ref, onMounted } = Vue;

  createApp({
    setup() {
      const pricelist = ref({});

      onMounted(async () => {
        const response = await fetch('assets/json/pricelist.json');
        pricelist.value = await response.json();
      });

      return { pricelist };
    }
  }).mount('#pricelist-vue');
</script>
